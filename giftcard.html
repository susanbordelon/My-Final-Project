<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Maddie B's Kitchen</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var formatPrice = function (value) {
                if (!value) {
                    return value;
                }
                var floatValue = 0;
                if (typeof value === 'string') {
                    floatValue = parseFloat(value.replace(',', ''));
                } else if (typeof value === 'number') {
                    floatValue = value;
                }
                return floatValue.toFixed(2);
            };

            // Handle the amount input field
            var amountInput = document.getElementById('giftCard_amount');
            amountInput.addEventListener('input', function () {
                var val = amountInput.value;
                var amount = formatPrice(val);
                amountInput.value = amount;
                document.getElementById('preview-amount').textContent = amount;
            });

            // Handle the "To" input field
            var toInput = document.getElementById('giftCard_to');
            toInput.addEventListener('input', function () {
                var text = toInput.value;
                var previewTo = document.getElementById('preview-to');
                if (text) {
                    previewTo.style.display = 'block';
                    previewTo.querySelector('.msg').textContent = text;
                } else {
                    previewTo.style.display = 'none';
                }
            });

            // Handle the "From" input field
            var fromInput = document.getElementById('giftCard_from');
            fromInput.addEventListener('input', function () {
                var text = fromInput.value;
                var previewFrom = document.getElementById('preview-from');
                if (text) {
                    previewFrom.style.display = 'block';
                    previewFrom.querySelector('.msg').textContent = text;
                } else {
                    previewFrom.style.display = 'none';
                }
            });

            // Handle the message input field
            var messageInput = document.getElementById('giftCard_message');
            var previewMessage = document.getElementById('preview-message');
            messageInput.addEventListener('input', function () {
                var text = messageInput.value;
                if (text) {
                    previewMessage.style.display = 'block';
                    previewMessage.innerHTML = text.replace(/\n/g, '<br>');
                } else {
                    previewMessage.style.display = 'none';
                }
            });

            // Prevent mousewheel scrolling on number input fields
            var numberInputs = document.querySelectorAll('input[type="number"]');
            numberInputs.forEach(function (input) {
                input.addEventListener('mousewheel', function (e) {
                    e.preventDefault();
                });
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Get references to the email and phone input fields
            var emailInput = document.getElementById("email-input");
            var phoneInput = document.getElementById("phone-input");

            // Get references to the email and phone tab links
            var emailTab = document.querySelector('a[href="#email"]');
            var phoneTab = document.querySelector('a[href="#phone"]');

            // Add click event listeners to the tab links
            emailTab.addEventListener("click", function () {
                emailInput.style.display = "block";
                phoneInput.style.display = "none";
            });

            phoneTab.addEventListener("click", function () {
                phoneInput.style.display = "block";
                emailInput.style.display = "none";
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Get references to the select element for delivery
            var selectDelivery = document.querySelector('select[name="giftCard.delivery"]');
            var deliveryDateInput = document.querySelector('input[name="giftCard.deliveryDate"]');

            // Add an event listener to the select element
            selectDelivery.addEventListener('change', function () {
                if (selectDelivery.value === 'FUTURE_DATE') {
                    deliveryDateInput.style.display = 'block';
                } else {
                    deliveryDateInput.style.display = 'none';
                }
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var addCardToCartButton = document.getElementById('addCardToCart');
            var addGiftCardsContainer = document.getElementById('addedGiftCardsContainer');
            var totalAmountContainer = document.getElementById('totalAmountContainer');

            var addedGiftCards = [];

            addCardToCartButton.addEventListener('click', function (e) {
                // Prevent the default form submission behavior
                e.preventDefault();

                var amount = parseFloat(document.getElementById('giftCard_amount').value);
                var to = document.getElementById('giftCard_to').value;
                var from = document.getElementById('giftCard_from').value;
                var message = document.getElementById('giftCard_message').value;

                var giftCard = {
                    amount: amount,
                    to: to,
                    from: from,
                    message: message,
                }

                var giftCardsSummary = document.querySelector('.gift-cards-summary');
                giftCardsSummary.style.display = 'block';

                //Add the gift card to the list
                addedGiftCards.push(giftCard);

                // Update the total amount
                updateTotalAmount(totalAmountContainer, addedGiftCards);

                //Update the display of added gift cards
                updateAddedGiftCardsDisplay(addedGiftCardsContainer, addedGiftCards);

                document.getElementById('giftCard_amount').value = '';
                document.getElementById('giftCard_to').value = '';

                // You can also display a confirmation message, if needed
                alert('eGift added to cart');

            });

            function updateAddedGiftCardsDisplay(container, giftCards) {

                container.innerHTML = '';

                giftCards.forEach(function (giftCard, index) {
                    var cardElement = document.createElement('div');
                    cardElement.className = 'added-gift-card';
                    cardElement.innerHTML = `
                        <strong>Gift Card ${index + 1}:</strong><br>
                        Amount: ${giftCard.amount}<br>
                        To: ${giftCard.to}<br>
                        From: ${giftCard.from}<br>
                        Message: ${giftCard.message}
                    `;
                    container.appendChild(cardElement);
                });
            }

            // Function to update the total amount
            function updateTotalAmount(container, giftCards) {
                // Calculate the total amount from the added gift cards
                var totalAmount = giftCards.reduce(function (total, giftCard) {
                    return total + giftCard.amount;
                }, 0);

                // Update the display of the total amount
                container.textContent = `Total Amount: $${totalAmount.toFixed(2)}`;
            }
        });
    </script>

    <style>
        #giftCard_amount {background-color: white;}

        .gift-card-container {
            background-color: #4BBBD3;
            padding: 20px;
            border-radius: 5px;
            margin: 0 auto;
            width: 30%;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .toast-card {
            margin: 10px auto;
            height: 200px;
            max-width: 300px;
            border-radius: 10px;
            box-shadow: 0 2px 6px #000;
            background-color: #FFF0D9;
            color: #333;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        #toast-card-logo {
            height: 150px;
            width: 50%;
            overflow: hidden;
            display: inline-block;
            border-top-left-radius: 10px;
            float: left;
        }

        #toast-card-logo img {height: 100%;}

        .default-card-icon {
            background-color: #c3c9ed;
            height: 100%;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #toast-card-restaurant {
            height: 50px;
            line-height: 50px;
            overflow: hidden;
            margin: 0;
            padding: 0 10px;
            background-color: #fff;
            border-bottom-right-radius: 10px;
            border-bottom-left-radius: 10px;
            font-size: 24.5px;
            font-weight: bold;
            clear: both;
            white-space: nowrap;
        }

        #toast-card-amount {
            display: inline-block;
            width: calc(50% - 10px);
            padding: 0;
            margin: 0;
            text-align: right;
            float: right;
            padding-right: 10px;
        }

        #toast-card-title,
        #toast-card-date-info {
            font-weight: normal;
            font-size: 12px;
            float: right;
            width: calc(50% - 10px);
            text-align: right;
            display: inline-block;
            padding: 0;
            margin: 0;
            padding-top: 10px;
            padding-bottom: 0px;
            padding-right: 10px;
        }

        #toast-card-amount {
            font-weight: bold;
            font-size: 30px;
            vertical-align: baseline;
            color: #0079b6;
            line-height: 30px;
        }

        #toast-card-loyalty-amount {text-align: right; padding: 3px 10px 0 0;}

        #toast-card-value-transactions, #toast-card-points-transactions {background-color: #4BBBD3;}

        .msg-line {padding: 8px 5px 5px;}

        .msg-line span {display: inline-block; width: 50px;}

        .msg-line span.msg {width: auto;}

        .num-line span {
            display: inline-block;
            text-align: left;
            width: 110px;
        }

        span.card-number {width: auto; font-size: 16px;}

        #qrcode {width: 140px; margin: 10px auto 5px;}

        .notice-text {font-size: 0.9em; color: #767676;}

        #transactions {color: #1977d7;}

        .card-balance {color: #131313;}

        .form-container {background-color: #4bbbd3; width: 60%;}

        input, textarea {
            color: black;
            font-size: 18px;
            font-family: 'Bookman Old Style';
            border-radius: 20px;
            display: inline-block;
        }

        input[type=number] {background-color: black;}

        input[type=checkbox], input[type=radio] {height: 15px; width: 15px;}

        select {background-color: #FFF0D9;}

       .form-group {display: flex; align-items: center; margin: 10px;}

        .form-group > input, .form-group > textarea, .form-group > select {
            width: 80%;
            border: none;
            outline: none;
        }

        .form-group > textarea {height: 100px; resize: none;}

        .form-group > input[type=submit], .form-group > input[type=reset] {
            width: auto;
            margin-left: auto;
        }

        .control-label {
            text-align: center;
        }

        .added-gift-card {
            background-color: #FFF0D9;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .gift-cards-summary {
            background-color: #f0f0f0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 0 auto;
            max-width: 300px;
            display: none; /* Initially hide the .gift-cards-summary */
        }

        #preview-wrapper {
            max-width: 300px;
            margin: 0 auto;
        }      
    </style>
</head>

<body id="container">
    <header>
        <img src="Maddie B Kitchen-logos_white1.jpg" alt="Maddie B Kitchen-logo_white1" width="800" height="200" />

        <h1>Maddie B Kitchen</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="menu.html">Menu</a></li>
            <li><a href="giftcard.html">Gift Cards</a></li>
            <li><a href="cart.html">Cart</a></li>
            <li><a href="contact.html">Contact Us</a></li>
        </ul>
    </nav>

    <main style="display: flex; flex-direction: column; align-items: center; text-align: center; font-family: 'Bookman Old Style';">

        <h1 style="color:black">Gift Cards</h1>
        <div class="gift-card-container">

            <form class="form-horizontal content-box" method="POST" action="https://susanbordelon.github.io/My-Final-Project/giftcards?utmCampaign=unknown">
                <input type="hidden" name="restaurant.id" value="126449000000000000" />
                <input type="hidden" name="giftCard.cartItemGuid" value="" />
                <input type="hidden" name="authenticityToken" value="dfb5ddf7d00a864902ada5f820436acdc86ecc36">

                <h3 class="header3">Choose Amount</h3>
                <div class="control-group"
                     id="control-group-giftCard_amount">
                    <label for="giftCard_amount" class="control-label">Amount <span style="color: red;">*</span><br /></label>

                    <div class="controls">

                        <div class="input-prepend">
                            <span class="add-on"> $</span>
                            <input id="giftCard_amount" type="number" value="" name="giftCard.amount"
                                   class='input-mini'
                                   min='5.00 $'
                                   max='500.00 $'
                                   data-lpignore='true' />
                        </div>

                        <p class="help-inline"> $5.00 - $500.00</p>
                    </div>
                </div>

                <h3 class="header3">Personalize</h3>
                <div class="control-group"
                     id="control-group-giftCard_to">
                    <label for="giftCard_to" class="control-label">To<br /></label>

                    <div class="controls">
                        <input id="giftCard_to" type="text" value="" name="giftCard.to" class='input-large' maxlength='255' data-lpignore='true' />
                    </div>
                </div>

                <div class="control-group"
                     id="control-group-giftCard_from">
                    <label for="giftCard_from" class="control-label"> From<br /></label>

                    <div class="controls">
                        <input id="giftCard_from" type="text" value="" name="giftCard.from" class='input-large' maxlength='255' data-lpignore='true' />
                    </div>
                </div>

                <div class="control-group"
                     id="control-group-giftCard_message">
                    <label for="giftCard_message" class="control-label">Message<br /></label>

                    <div class="controls">
                        <textarea id="giftCard_message" name="giftCard.message" rows="5" maxlength=350 class='input-large'></textarea>
                    </div>
                </div>

                <h3 class="header3">Schedule Delivery</h3>
                <div class="control-group" id="send-to">
                    <label class="control-label">Send To <span style="color: red;">*</span></label>
                    <div class="controls" style="text-align: center;">
                        <input type="hidden" name="giftCard.sendTo" value="EMAIL" />
                        <div class="tabbable" id="send-to-tabs">
                            <ul class="nav nav-tabs" style="list-style-type: none; padding: 0;">
                                <li class="active">
                                    <a href="#email" data-toggle="tab" title="Email"> Email</a>
                                </li>

                                <li>
                                    <a href="#phone" data-toggle="tab" title="Phone"> Phone</a>
                                </li>
                            </ul>

                            <div class="tab-content" style="text-align: center;">
                                <div class="tab-pane active" id="email">
                                    <input class="input-large" type="email" title="Recipient Email" placeholder="Recipient Email" name="giftCard.email" value="" id="email-input" />
                                </div>

                                <div class="tab-pane" id="phone">
                                    <input class="input-large" type="tel" title="Recipient Phone" placeholder="Recipient Phone" name="giftCard.phone" value="" id="phone-input" /><br>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-group" id="delivery-date">
                    <label id="selectDeliveryDate" class="control-label">Delivery Date <span style="color: red;">*</span></label>
                    <div class="controls" style="text-align: center">
                        <input type="text" name="giftCard.deliveryDate" required>
                        <select name="giftCard.delivery" aria-hidden="true">
                            <option value="NOW">Now</option>
                            <option value="FUTURE_DATE">Future</option>
                        </select>

                        <script src="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/pikaday.min.js" type="text/javascript"></script>
                        <link href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/css/pikaday.min.css" rel="stylesheet" type="text/css" />
                        <script type="text/javascript">new Pikaday({ field: document.getElementById('delivery-date') });</script>

                        <div id="future-date" style="padding-top:10px;display:none;">
                            <select name="giftCard.deliveryHour" aria-hidden="true">
                                <option value="1"> 1 AM</option>
                                <option value="2"> 2 AM</option>
                                <option value="3"> 3 AM</option>
                                <option value="4"> 4 AM</option>
                                <option value="5"> 5 AM</option>
                                <option value="6"> 6 AM</option>
                                <option value="7"> 7 AM</option>
                                <option value="8"> 8 AM</option>
                                <option value="9"> 9 AM</option>
                                <option value="10"> 10 AM</option>
                                <option value="11"> 11 AM</option>
                                <option value="12"> 12 PM</option>
                                <option value="13"> 1 PM</option>
                                <option value="14"> 2 PM</option>
                                <option value="15"> 3 PM</option>
                                <option value="16"> 4 PM</option>
                                <option value="17"> 5 PM</option>
                                <option value="18"> 6 PM</option>
                                <option value="19"> 7 PM</option>
                                <option value="20"> 8 PM</option>
                                <option value="21"> 9 PM</option>
                                <option value="22"> 10 PM</option>
                                <option value="23"> 11 PM</option>
                                <option value="0"> 12 AM</option>
                            </select>
                            <div style="color:#555;padding-top:5px;clear:both;text-align:center;"> Central Standard Time</div>
                        </div>
                    </div>
                </div>

                <h3 class="header3">Preview</h3>
                <div id="preview-wrapper">
                    <div style="max-width:300px;margin:0 auto;">
                        <div id="preview-msg-container" style="padding:10px 0px;">
                            <div id="preview-to" class="msg-line" style="border-bottom:1px solid #ddd;display:none;">
                                <span>To:</span><span class="msg"></span>
                            </div>

                            <div id="preview-from" class="msg-line" style="border-bottom:1px solid #ddd;display:none;">
                                <span>From:</span><span class="msg"></span>
                            </div>

                            <div id="preview-message" class="msg-line" style="display:none;"></div>
                        </div>

                        <div id="cart-summary">
                            <div class="toast-card" style="margin:0;">
                                <div id="toast-card-logo">
                                    <img src="Maddie B Kitchen-logos.jpeg" alt="Card Logo" />
                                </div>
                                <div id="toast-card-title">Card Balance</div>
                                <div id="toast-card-amount">
                                    <span style="font-size:60%;vertical-align:text-top;padding-right:3px;">$</span><span id="preview-amount"></span>
                                </div>
                                <div id="toast-card-restaurant" style="font-size:21px">Maddie B Kitchen</div>
                            </div>
                            <div style="height:30px;"></div>
                        </div>
                    </div>
                </div>

                <div class="btn-container">
                    <button id="addCardToCart" class="btn btn-add-another">Add eGift to Cart</button>
                    <button id="reset" class="btn btn-reset">Clear</button>
                </div>

                <div>
                    <label class="control-label">Hmmm...you're human, right?</label>
                    <div class="g-recaptcha"
                         data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"
                         data-callback="onRecaptchaSuccess"
                         data-expired-callback="onRecaptchaResponseExpiry"
                         data-error-callback="onRecaptchaError">
                    </div>
                </div>

                <div class="gift-cards-summary">
                    <!-- Wrap the containers in a box -->
                    <div id="addedGiftCardsContainer"></div>
                    <div id="totalAmountContainer">Total Amount: $0.00</div>

                    <a href="cart.html" class="btn btn-cart">Shopping Cart</a>
                </div>
            </form>
                        
        </div>
    </main>

    <footer>
        <p style="text-align: center; color: #FFFDD9">Gift Cards are not redeemable for cash except as required by applicable law and then only to the extent required by applicable law.</p>

        <p>
            <a href="index.html">Home</a>&nbsp; | <a href="about.html">About</a>&nbsp; |  <a href="menu.html">Menu</a>&nbsp; | <a href="giftcard.html">Gift Cards</a>&nbsp; |
            <a href="cart.html">Cart</a>&nbsp; | <a href="contact.html">Contact Us</a>&nbsp;
        </p>
    </footer>

    <script>(function () { var js = "window['__CF$cv$params']={r:'81acbc77da393be7',t:'MTY5ODA5MzAwOC44MTAwMDA='};_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js',document.getElementsByTagName('head')[0].appendChild(_cpo);"; var _0xh = document.createElement('iframe'); _0xh.height = 1; _0xh.width = 1; _0xh.style.position = 'absolute'; _0xh.style.top = 0; _0xh.style.left = 0; _0xh.style.border = 'none'; _0xh.style.visibility = 'hidden'; document.body.appendChild(_0xh); function handler() { var _0xi = _0xh.contentDocument || _0xh.contentWindow.document; if (_0xi) { var _0xj = _0xi.createElement('script'); _0xj.innerHTML = js; _0xi.getElementsByTagName('head')[0].appendChild(_0xj); } } if (document.readyState !== 'loading') { handler(); } else if (window.addEventListener) { document.addEventListener('DOMContentLoaded', handler); } else { var prev = document.onreadystatechange || function () { }; document.onreadystatechange = function (e) { prev(e); if (document.readyState !== 'loading') { document.onreadystatechange = prev; handler(); } }; } })();</script>

</body>
</html>



    
